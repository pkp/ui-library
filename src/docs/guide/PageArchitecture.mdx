import {Meta} from '@storybook/blocks';

<Meta title="Guide/Page Architecture" />

# Page Architecture

These principles applies for version 3.5 and higher when building new pages or making significant changes to existing ones.

Since its recent change, we have limited number of examples in our code base. At this point best to follow [Example Page](?path=/docs/pages-example--docs) and [New Submission Page](?path=/docs/pages-submissions--docs). There is more to come soon.

## Folder structure

All Page related files are localed in `lib/ui-library/src/pages` folder. Check out [ExamplePage](?path=/docs/pages-example--docs#folder-structure) for per file breakdown.

## Page template included in Page component.

To [simplify](?path=/docs/guide-technical-roadmap--docs#vuejs--smarty---vuejs-35) the developer experience when creating Pages, we are moving from combination of Smarty and Vue.js to use pure Vue.js components, which have templates as part of the component file.

## State management

For managing Page business logic we are leveraging [Pinia store](../?path=/docs/guide-pinia-store--docs). Main reason why we want to use Pinia stores instead of just managing state directly in the Page component, is that behind the scene its very extensible and plugin friendly. You can check out more detailed break down in our [Technical Roadmap](?path=/docs/guide-technical-roadmap--docs#pinia-stores-35). General UI components still contains interaction logic directly in component.

To understand how the Components should interact with the **Component Pinia Store**, which is our simple extension of the Pinia Store, check out dedicated [page](http://localhost:6006/?path=/docs/guide-pinia-store--docs#component-pinia-store) for Pinia store.

### Where to place business logic?

- **Page**: Every Page will have its own [Component Pinia Store](?path=/docs/guide-pinia-store--docs#component-pinia-store), where most of the business logic is handled and for simpler Pages that should be good enough.
- **Complex Modals**: If Page contain Modal(s) that contain substantial functionality, which is reasonably well separable from the rest of the Page, than its good indication that the Modal should have its own Component Store. Good example is `SubmissionSummaryModal.vue`.
- **Self-Contained Component**: We don't have good example yet of Self-Contained Component, which would have its own Pinia store. But good candidates in general are Components that can be used on multiple places, and their logic can be well separated from the rest of the page. Like managing Submission files in both Submission wizard and Workflow editor.

## Server side configuration

On initial page load, there is still opportunity to pass JSON object from PHP to the Vue.js. Best is to express individual items as props, so it can be easily displayed in storybook and its well documented.

This might include things like:

- Form structure configuration, as we do configure forms on PHP side.
- Any configuration, which needs to be passed just once on page load.

## Styling

For styling use TailwindCSS, for more details check out [styling guide](../?path=/docs/guide-style-introduction--docs).
